!function(a){var b=function(b,c,d,e,f){b.each(b.eq(0).data(c)?function(){var b=a(this);b.data(d,b.text()),b.text(b.data(c))}:function(){var b=a(this),c=b.text();b.data(d,c),c.length>8&&(c=c.replace(':','.')),c=f(c);var g=Math.floor(c.asDays());b.text(e&&g>0?sprintf('%02d:%02d:%02d:%02d',g,c.hours(),c.minutes(),c.seconds()):sprintf('%02d:%02d:%02d',c.asHours(),c.minutes(),c.seconds()))})},c=function(a,b){b.find(':disabled').prop('disabled',!1);var c=a.find(':selected').data('oppositeId');c&&b.find('[value="'+c+'"]').prop('disabled',!0),b.trigger('chosen:updated')};a(function(){var d,e=a('tbody'),f=a('form'),g=a('select[name="id"]'),h=a('input[type="checkbox"]'),i=g.add(h),j=a('select[name="time"]'),k=j.add(h).add('select[name^="elem"], select[name^="parent"]'),l=a('input[name="reduced"]'),m=a('input[name="displayDays"]'),n=a('select'),o=a('select[name="parent1"]'),p=a('select[name="parent2"]');e.ajaxTable({url:'./php/ajax.php',makeRows:dragonRows,autoEmpty:!0,pagination:paginationDefaults('Pagina non valida')}),f.submit(function(){return e.ajaxTable('submit',('0'!=g.val()?i:k).activeCtrls({request:'dragons'})),!1}),e.ajaxTable('addPageCheckListener','page','change',function(){f.submit()}),a('[type="submit"]').click(function(){e.ajaxTable('pageChanged',!1)}),l.change(function(){if(l.prop('checked'))var a=.8,c='reduced',e='full';else var a=1.25,c='full',e='reduced';if(m.prop('checked')){var f=!0;c+='Days',e+='Days'}else{var f=!1;c+='NoDays',e+='NoDays'}var g=function(b){return moment.duration(moment.duration(b).asMilliseconds()*a)};b(d,c,e,f,g),j.trigger('chosen:updated'),b(resultTimes,c,e,f,g)}),m.change(function(){if(l.prop('checked'))var a='reduced',c='reduced';else var a='full',c='full';if(m.prop('checked')){var e=!0;a+='Days',c+='NoDays'}else{var e=!1;a+='NoDays',c+='Days'}b(d,a,c,e,moment.duration),j.trigger('chosen:updated'),b(resultTimes,a,c,e,moment.duration)}),o.change(function(){c(o,p)}),p.change(function(){c(p,o)}),n.addClass('chosen'),n.chosen({inherit_select_classes:!0,no_results_text:'Niente che inizi con '}),a.getJSON('./php/ajax.php',{request:'init',reduced:l.prop('checked')?1:0,displayDays:m.prop('checked')?1:0},function(b){for(var c=0;b.length>c;++c)j.append(a('<option></option>',b[c]));j.trigger('chosen:updated'),d=j.children('option:gt(0)')}),o.change(),p.change()})}(jQuery);